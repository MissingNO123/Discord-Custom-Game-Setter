<!-- DOCTYPE html -->
<html>
	<head>
        <title>Discord Custom Game Setter</title>
        <script src="discordio.js"></script> <!-- The discord.io client file -->
        <style>
			body {
				margin: 0;
				background-color: #7289da;
			}
			
			#content {
				padding-top: 20px;
				color: white;
				font-family: Whitney,'Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;
				text-align: center;
			}
			
			#divvy {
				text-align: left;	
			}

			img.mid {
				vertical-align: middle;
			}
			
			#cgs {
				font-size: 2.5em;
			}
			
			input[type=button], input[type=submit], input[type=reset], button {
				position: relative;
				background-color: white;
				border: none;
				border-radius:3px;
				color: #7289da;
				font-family: Whitney,'Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;
				padding: 16px 32px;
				text-decoration: none;
				width: 250px;
				margin: 10px;
				margin-top: 0;
				cursor: pointer;
				box-shadow: 0 2px 6px 0 rgba(0,0,0,.2);
			}
			
			button:hover {
				top: 1px;
				box-shadow: 0 0px 0px 0 rgba(0,0,0,0);
			}
			
			input[type=text] {
				color: white;
				font-family: Whitney,'Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;
				text-align: center;
				border: none;
				border-bottom: 2px solid white;
				padding: 0px 20px 5px 20px;
				margin: 8px 0;
				box-sizing: border-box;
				background-color: #7289da;
			}
			
			#fadeblack {
				position: fixed;
				opacity: 0;
				z-index: -1; 
				margin: 0;
				width: 100%;
				height: 100%;
				background-color: rgba(0,0,0,0.4);
				document.getElementById("msgBox").style.transition = "opacity 0.5s ease-in-out, top 0.5s ease-in-out, z-index 0.5s ease-in";
			}
			
			#msgBox {
				opacity: 0;
				display:flex;
				color: #7289da;
				height: auto; /* 0 height */
				width: 50%; /* 0 width - change these with JavaScript */
				position: fixed; /* Stay in place */
				z-index: -1; /* Stay underneath till we need it */
				top: 25%;
				left: 20%;
				background-color: white;
				border-radius: 9px;
				margin: 5%;
				padding: 10px;
				flex-direction: column;
				overflow: hidden; /* Disable scroll */
				transition: opacity 0.5s ease-in-out, top 0.5s ease-in-out, z-index 0.1s ease-in-out;
			}
			
			#xbutton {
				color: red;
				position: absolute;
				top: 0px;
				left: 15px;
				font-family: Arial, sans-serif;
				font-weight: bold;
				font-size: 40;
			}
			
			#xbutton a {text-decoration:none;}
			#xbutton a:link{color:red;} 
			#xbutton a:visited{color:red;}
			#xbutton a:hover{color:#EE0000;}
			
			#title {
				color: black;
				font-size: 1.2em;
				margin: 0px 0px 6px 0px;
				padding-bottom: 8px;
				border-bottom: 1px solid #DDDDEE;
			}
			
			@font-face{font-family:'Reenie Beanie';src:url(https://discordapp.com/assets/4b861c4f9cb4e4fbec1662f6c6e9186f.woff) format('woff')}
			@font-face{font-family:Whitney;font-style:light;font-weight:300;src:url(https://discordapp.com/assets/16801bfdf51ed88e69bc90626a3ea436.woff) format('woff')}
			@font-face{font-family:Whitney;font-style:normal;font-weight:500;src:url(https://discordapp.com/assets/d153359b5d87601d2b9c708b7ae2db02.woff) format('woff')}
			@font-face{font-family:Whitney;font-style:medium;font-weight:600;src:url(https://discordapp.com/assets/a934ab008c7f6a2274ec441f6be0696a.woff) format('woff')}
			@font-face{font-family:Whitney;font-style:semibold;font-weight:650;src:url(https://discordapp.com/assets/877ef48bf9fcfee590f0ba64de101b59.woff) format('woff')}
			@font-face{font-family:Whitney;font-style:bold;font-weight:700;src:url(https://discordapp.com/assets/2e004dd717cdc58b9ccb361d286ebbce.woff) format('woff')}
			@font-face{font-family:SourceCodePro;font-style:normal;font-weight:500;src:url(https://discordapp.com/assets/748ac49ebe4bf0ddfe85c005be7c64c4.woff) format('woff')}
		</style>
    </head>
    <body>
		<div id="fadeblack"></div>
		<div id="content" style="margin-left: 20%;margin-right: 20%;">
			<div id="cgs"><a href="http://discord.gg" target="_blank"><img class="mid" src="https://discordapp.com/assets/4f004ac9be168ac6ee18fc442a52ab53.svg" width="300px" alt="Discord"></a>
			 Custom Game Setter</div>
			<form id="frm1">
				<input name="token" id="token" size="90" placeholder="Input Your Token Here" type="text"><br>
				<input name="game" id="game" size="90" placeholder="Name of the Game You Want Others to See" type="text"><br>
			</form> 
			<button onclick="setUserGameInfoFromPageThingFunction()">Submit</button>
			<button onclick="dispMsg()">How do I get my token?</button><br>
			<span style="color:#FF5555">WARNING! Tokens should be handled with care (treat them as if they were your password!), as they grant access to your user account. I am not responsible for any damage caused to you or your account by using this tool, 
				use it at your own risk.</span>
				<br> (If nothing happens when you hit submit, you may have entered an invalid token.)
				<br> <br>	 
			
			<div id="divvy" style="background-color:#222222;padding:12px;">
				<span id="alltext" style="font-family:Monaco,monospace;color:#FEFEFE;"><b>Log</b><br><br></span>
			</div> 
			
			
			
			<div id="msgBox">
				<span id="xbutton"><a href="#" onclick="closeMsg()">&#215;</a></span> <br />
				<span id="title">To get your token:</span> <br />
				Open Discord in your web browser, click on the address bar and clear it, then type <br />
				<a style="color:black; display:inline;">javascript:alert(localStorage.token)</a><br />
				A message will pop up with your token in quotation marks. <br />
				It will look something like this: <br />
				"MTc1DeF2GHIjKLm3NOP4QRS5.Tuv6WX.y7Z_ABcDE7-fgHij8K8LMNopQrs"
			</div>
		</div>
	<script>

		
function setUserGameInfoFromPageThingFunction() {
	
	var x = document.getElementById("frm1");
	var tokenFromPage = x.elements[0].value;
	var gameFromPage = x.elements[1].value;
	var client = new Discord.Client({
		token: tokenFromPage,
		autorun: true
	});

	var presence = {
		idle_since: null,
		game: {
			name: gameFromPage,
			type: 0,
			url: null
		}
	};

	client.on("ready", function(event) {
		addText("Connected!");
		addText("Logged in as: ");
		addText(client.username + " - (" + client.id + ")");
		client.setPresence(presence); addText("Game set to \"" + presence.game.name + "\"");
		addText("All done! You can close the page now.<br />");
	});
}

function addText(add) {
	document.getElementById("alltext").innerHTML += add + "<br />";	
	console.log(add);
}

/* Set the width of the box to 40% and show it*/
function dispMsg() {
	document.getElementById("msgBox").style.transition = "opacity 0.5s ease-in-out, top 0.5s ease-in-out, z-index 0.5s ease-out";
	document.getElementById("fadeblack").style.transition = "opacity 0.5s ease-in-out, top 0.5s ease-in-out, z-index 0.5s ease-out";
	document.getElementById("fadeblack").style.opacity = "1";
	document.getElementById("msgBox").style.zIndex = "2";
	document.getElementById("fadeblack").style.zIndex = "1";
	document.getElementById("msgBox").style.top = "30%";
	document.getElementById("msgBox").style.opacity = "1";
}

/* Set the width of the box to 0 and hide it*/
function closeMsg() {
	document.getElementById("msgBox").style.transition = "opacity 0.5s ease-in-out, top 0.5s ease-in-out, z-index 0.5s ease-in";
	document.getElementById("fadeblack").style.transition = "opacity 0.5s ease-in-out, top 0.5s ease-in-out, z-index 0.5s ease-in";
	document.getElementById("msgBox").style.opacity = "0";
	document.getElementById("fadeblack").style.opacity = "0";
	document.getElementById("msgBox").style.top = "25%";
	document.getElementById("msgBox").style.zIndex = "-1";
	document.getElementById("fadeblack").style.zIndex = "-1";
}

	  </script>
	</body>
</html>
