<!doctype HTML>
<html>
    <head>
        <title>Discord Custom Game Setter</title>
        <script src="discordio.js"></script> <!-- The discord.io client file -->
    </head>
    <body>
			<form id="frm1">
				Token: <input type="text" name="token" value=""><br />
				Game: <input type="text" name="game" value=""><br />
			</form> 
			<button onclick="setUserGameInfoFromPageThingFunction()">Submit</button>
			<button onclick="howToToken()">How do I get my token?</button><br />
			WARNING! Tokens should be handled with care (treat them as if they were your password!), as they grant access to your user account. I am not responsible for any damage caused to you or your account by using this tool, use it at your own risk.
	    		<br /> 
	    
			
    	<span id="alltext">Console Log<br/><br/></span> 
			

        <script>
function setUserGameInfoFromPageThingFunction() {
	var x = document.getElementById("frm1");
	var tokenFromPage = x.elements[0].value;
	var gameFromPage = x.elements[1].value;
	var client = new Discord.Client({
		token: tokenFromPage,
		autorun: true
	});

	var presence = {
		idle_since: null,
		game: {
			name: gameFromPage,
			type: 0,
			url: null
		}
	};

	client.on("ready", function(event) {
		addText("Connected!");
		addText("Logged in as: ");
		addText(client.username + " - (" + client.id + ")");
		client.setPresence(presence); addText("Game set to " + presence.game.name);
		addText("All done! You can close the page now.");
	});
}

function addText(add) {
	document.getElementById("alltext").innerHTML += add + "<br />";	
	console.log(add);
}

function howToToken() {
	alert("To get your token: \nOpen Discord in your web browser, press F12, click console. \nType \"console.log(localStorage.token)\", it will print your token in quotation marks.");
}
      </script>
    </body>
</html>
